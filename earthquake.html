<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<title>ğŸ“¡ åœ°éœ‡é€Ÿå ±</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  body { font-family: Arial, sans-serif; padding: 20px; background: #f9f9f9; }
  .item { background: white; padding: 15px; margin-bottom: 15px; border-radius: 8px; box-shadow: 0 0 5px rgba(0,0,0,0.1);}
  .title { font-weight: bold; color: #d9534f; }
  a { text-decoration: none; color: #337ab7; }
</style>
</head>
<body>
<h1>ğŸ“¡ ä¸­å¤®æ°£è±¡å±€åœ°éœ‡é€Ÿå ±</h1>
<div id="list">è³‡æ–™è¼‰å…¥ä¸­...</div>

<script>
  const apiKey = "CWA-FA9ADF96-A21B-4D5D-9E9D-839DBF75AF71";
  const url = `https://opendata.cwa.gov.tw/api/v1/rest/datastore/E-A0015-001?Authorization=${apiKey}&limit=5`;

  fetch(url)
    .then(res => res.json())
    .then(data => {
      const eqs = data.records?.Earthquake;
      if (!eqs || eqs.length === 0) {
        document.getElementById('list').innerText = "ç›®å‰æ²’æœ‰åœ°éœ‡è³‡æ–™";
        return;
      }

      let html = "";
      eqs.forEach(eq => {
        const info = eq.EarthquakeInfo || {};
        const loc = info.Epicenter?.Location || "æœªçŸ¥åœ°é»";
        const mag = info.EarthquakeMagnitude?.MagnitudeValue ?? "æœªçŸ¥";
        const depth = info.FocalDepth ?? "æœªçŸ¥";
        const timeStr = info.OriginTime || "";
        let time = "æœªçŸ¥æ™‚é–“";
        if(timeStr) {
          const d = new Date(timeStr);
          if(!isNaN(d)) time = d.toLocaleString();
        }

        html += `<div class="item">
          <div><span class="title">éœ‡å¤®ï¼š</span>${loc}</div>
          <div>ğŸ•’ æ™‚é–“ï¼š${time}</div>
          <div>ğŸ“ è¦æ¨¡ï¼š${mag}ã€€ğŸ’§ æ·±åº¦ï¼š${depth} å…¬é‡Œ</div>
          <div><a href="${eq.Web}" target="_blank" rel="noopener">è©³ç´°å ±å‘Šé€£çµ</a></div>
        </div>`;
      });

      document.getElementById('list').innerHTML = html;
    })
    .catch(e => {
      document.getElementById('list').innerText = "âŒ è¼‰å…¥è³‡æ–™å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦";
      console.error(e);
    });
</script>
</body>
</html>
